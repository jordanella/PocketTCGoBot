# Navigation Routine Template
# Copy this file and customize for navigating to a specific screen

routine_name: "Navigate to Target Screen"
description: "Navigate from current location to target screen"
tags: ["navigation"]

actions:
  # 1. Dismiss any popups first (idempotent navigation)
  - action: If
    condition_type: template_exists
    template: popup_close_button
    actions:
      - action: Click
        template: popup_close_button
      - action: Wait
        duration: 1000

  # 2. Check if already at target screen
  - action: If
    condition_type: template_exists
    template: target_screen_indicator
    actions:
      - action: Comment
        text: "Already at target screen"
      - action: Return

  # 3. Navigate to home screen first (known state)
  # Option A: Click home button
  - action: If
    condition_type: template_exists
    template: home_button
    actions:
      - action: Click
        template: home_button
      - action: Wait
        duration: 2000

  # Option B: Use back button multiple times
  # - action: While
  #   condition_type: template_not_exists
  #   template: home_screen_indicator
  #   timeout: 10000
  #   actions:
  #     - action: If
  #       condition_type: template_exists
  #       template: back_button
  #       actions:
  #         - action: Click
  #           template: back_button
  #         - action: Wait
  #           duration: 1000

  # 4. Verify at home screen
  - action: WaitForTemplate
    template: home_screen_indicator
    timeout: 5000

  # 5. Navigate to target screen
  # Replace with your specific navigation path
  - action: Comment
    text: "Navigating from home to target"

  - action: Click
    template: menu_button

  - action: Wait
    duration: 1000

  - action: Click
    template: target_screen_button

  # 6. Verify arrival at target screen
  - action: WaitForTemplate
    template: target_screen_indicator
    timeout: 5000
    retries: 3

  - action: Comment
    text: "Successfully navigated to target screen"
