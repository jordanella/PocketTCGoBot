# Combat Routine Template
# Copy this file and customize for your specific battle scenario

routine_name: "My Combat Routine"
description: "Brief description of what this combat routine does"
tags: ["combat"]

# Optional: Configuration parameters for this routine
config:
  - name: max_battle_duration
    type: int
    default: 300
    description: "Maximum battle duration in seconds"

# Optional: Sentry routines to monitor during combat
sentries:
  - routine: error_handling/popup_handler
    frequency: 15
    severity: low
    on_success: resume
    on_failure: resume

  - routine: error_handling/connection_check
    frequency: 30
    severity: high
    on_success: resume
    on_failure: force_stop

# Main battle actions
actions:
  # 1. Navigate to battle (if not already there)
  - action: Comment
    text: "Starting battle routine"

  # 2. Wait for battle start button
  - action: WaitForTemplate
    template: battle_start_button
    timeout: 10000

  # 3. Start battle
  - action: Click
    template: battle_start_button

  # 4. Wait for battle to load
  - action: Wait
    duration: 3000

  # 5. Main battle loop - replace with your battle logic
  - action: While
    condition_type: template_not_exists
    template: victory_screen
    timeout: "${max_battle_duration * 1000}"
    actions:
      # Your battle actions here
      # Example: Click cards, select attacks, etc.

      - action: Comment
        text: "Perform battle actions here"

      - action: Wait
        duration: 2000

  # 6. Collect rewards
  - action: WaitForTemplate
    template: victory_screen
    timeout: 5000

  - action: Click
    template: claim_rewards_button

  - action: Wait
    duration: 2000

  # 7. Return to previous screen
  - action: Click
    template: back_button
