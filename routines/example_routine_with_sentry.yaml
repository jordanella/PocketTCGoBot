routine_name: "Main Routine with Sentry"
description: "Example routine demonstrating sentry-based error handling for popup management"
tags: ["example", "automation"]

steps:
  - action: Click
    x: 100
    y: 200

  - action: Sleep
    duration: 2000

  - action: Click
    x: 300
    y: 400

  - action: Sleep
    duration: 2000

  # Loop example that will run while sentry monitors
  - action: WhileImageFound
    max_attempts: 10
    template: "continue_button"
    actions:
      - action: Click
        x: 500
        y: 600

      - action: Sleep
        duration: 1000

# Sentry definitions - run in parallel to monitor for issues
sentries:
  # Check for unexpected popups every 3 seconds
  - routine: example_sentry_popup_handler
    frequency: 3
    severity: high
    on_success: resume    # If popup found and closed, resume main routine
    on_failure: resume    # If no popup found (nil error), continue normally

  # Example: Check for disconnection every 5 seconds (would need implementation)
  # - routine: check_connection_sentry
  #   frequency: 5
  #   severity: critical
  #   on_success: resume
  #   on_failure: force_stop
