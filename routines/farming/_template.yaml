# Farming Routine Template
# Copy this file and customize for your specific farming scenario

routine_name: "My Farming Routine"
description: "Brief description of what resources this farms"
tags: ["farming"]

# Configuration for farming behavior
config:
  - name: max_runs
    type: int
    default: 10
    description: "Maximum number of farming iterations"

  - name: run_delay
    type: int
    default: 2000
    description: "Delay between runs in milliseconds"

# Sentry routines for error detection
sentries:
  - routine: error_handling/popup_handler
    frequency: 10
    severity: low
    on_success: resume
    on_failure: resume

  - routine: error_handling/connection_check
    frequency: 30
    severity: high
    on_success: resume
    on_failure: force_stop

actions:
  # Initialize counter
  - action: SetVariable
    variable: run_count
    value: 0

  # Navigate to farming location (customize as needed)
  - action: Comment
    text: "Navigate to farming location"

  # Main farming loop
  - action: While
    condition: "${run_count} < ${max_runs}"
    actions:
      # Log progress
      - action: Comment
        text: "Starting farm run ${run_count + 1} of ${max_runs}"

      # --- START FARMING LOGIC ---
      # Replace this section with your specific farming actions

      # Example: Click farming button
      - action: WaitForTemplate
        template: farm_button
        timeout: 10000

      - action: Click
        template: farm_button

      # Example: Wait for completion
      - action: WaitForTemplate
        template: completion_indicator
        timeout: 60000

      # Example: Collect rewards
      - action: Click
        template: claim_rewards_button

      - action: Wait
        duration: "${run_delay}"

      # --- END FARMING LOGIC ---

      # Increment counter
      - action: SetVariable
        variable: run_count
        value: "${run_count} + 1"

      # Check if resource is full (optional)
      - action: If
        condition_type: template_exists
        template: resource_full_indicator
        actions:
          - action: Comment
            text: "Resource full, stopping farming"
          - action: Break

  # Final cleanup
  - action: Comment
    text: "Farming complete. Completed ${run_count} runs"
